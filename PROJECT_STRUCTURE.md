# ConfigMate é¡¹ç›®ç»“æ„

## ğŸ“ ç›®å½•ç»„ç»‡

```
configmate/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ index.ts                    # ä¸»å…¥å£æ–‡ä»¶ï¼Œå¯¼å‡ºæ‰€æœ‰å…¬å…± API
â”‚   â”œâ”€â”€ types/                      # ç±»å‹å®šä¹‰
â”‚   â”‚   â”œâ”€â”€ index.ts               # ä¸»è¦ç±»å‹å®šä¹‰
â”‚   â”‚   â””â”€â”€ external.d.ts          # å¤–éƒ¨åº“çš„ç±»å‹å£°æ˜
â”‚   â”œâ”€â”€ core/                       # æ ¸å¿ƒåŠŸèƒ½
â”‚   â”‚   â””â”€â”€ config-manager.ts      # é…ç½®ç®¡ç†å™¨ä¸»ç±»
â”‚   â”œâ”€â”€ loaders/                    # åŠ è½½å™¨æ¨¡å—
â”‚   â”‚   â””â”€â”€ config-loader.ts       # å¤šæ ¼å¼é…ç½®æ–‡ä»¶åŠ è½½å™¨
â”‚   â”œâ”€â”€ detectors/                  # æ£€æµ‹å™¨æ¨¡å—
â”‚   â”‚   â””â”€â”€ change-detector.ts     # é…ç½®å˜æ›´æ£€æµ‹å™¨
â”‚   â””â”€â”€ helpers/                    # è¾…åŠ©å‡½æ•°
â”‚       â””â”€â”€ define-config.ts       # defineConfig è¾…åŠ©å‡½æ•°
â”œâ”€â”€ examples/                       # ä½¿ç”¨ç¤ºä¾‹
â”‚   â”œâ”€â”€ config.ts                  # TypeScript é…ç½®ç¤ºä¾‹
â”‚   â”œâ”€â”€ config.json                # JSON é…ç½®ç¤ºä¾‹
â”‚   â”œâ”€â”€ config.yaml                # YAML é…ç½®ç¤ºä¾‹
â”‚   â””â”€â”€ usage.ts                   # å®Œæ•´ä½¿ç”¨ç¤ºä¾‹
â”œâ”€â”€ dist/                          # æ„å»ºè¾“å‡º
â”‚   â”œâ”€â”€ index.js                   # CommonJS ç‰ˆæœ¬
â”‚   â”œâ”€â”€ index.mjs                  # ESM ç‰ˆæœ¬
â”‚   â””â”€â”€ index.d.ts                 # TypeScript å£°æ˜
â”œâ”€â”€ package.json
â”œâ”€â”€ tsconfig.json
â”œâ”€â”€ tsup.config.ts
â”œâ”€â”€ README.md
â”œâ”€â”€ SUMMARY.md
â””â”€â”€ PROJECT_STRUCTURE.md           # æœ¬æ–‡ä»¶
```

## ğŸ“¦ æ¨¡å—è¯´æ˜

### `src/index.ts`
- **èŒè´£**: ä¸»å…¥å£æ–‡ä»¶
- **åŠŸèƒ½**: 
  - å¯¼å‡ºæ‰€æœ‰å…¬å…± API
  - æä¾›ä¾¿æ·çš„ `createConfig` å‡½æ•°
  - ä½œä¸ºåŒ…çš„å”¯ä¸€å¯¹å¤–æ¥å£

### `src/types/`
**èŒè´£**: ç±»å‹å®šä¹‰æ¨¡å—

#### `index.ts`
- å®šä¹‰æ‰€æœ‰æ¥å£å’Œç±»å‹
- ConfigOptions, ConfigFile, ConfigChange ç­‰
- äº‹ä»¶ç±»å‹å®šä¹‰

#### `external.d.ts`
- ç¬¬ä¸‰æ–¹åº“çš„ç±»å‹å£°æ˜
- toml, ini ç­‰å¯é€‰ä¾èµ–çš„ç±»å‹

### `src/core/`
**èŒè´£**: æ ¸å¿ƒä¸šåŠ¡é€»è¾‘

#### `config-manager.ts`
- ConfigManager ä¸»ç±»å®ç°
- é…ç½®åŠ è½½ã€åˆå¹¶ã€æ›´æ–°é€»è¾‘
- æ–‡ä»¶ç›‘å¬å’Œäº‹ä»¶è§¦å‘
- é…ç½®çš„è¯»å–ã€è®¾ç½®ã€åˆ é™¤æ“ä½œ

### `src/loaders/`
**èŒè´£**: æ–‡ä»¶åŠ è½½æ¨¡å—

#### `config-loader.ts`
- ConfigLoader ç±»å®ç°
- æ”¯æŒå¤šç§æ ¼å¼: TS, JS, JSON, YAML, TOML, INI
- ä½¿ç”¨ jiti åŠ è½½ TypeScript/JavaScript
- æ–‡ä»¶å‘ç°å’Œä¿å­˜åŠŸèƒ½

### `src/detectors/`
**èŒè´£**: æ£€æµ‹å’Œåˆ†ææ¨¡å—

#### `change-detector.ts`
- ChangeDetector ç±»å®ç°
- ä½¿ç”¨ deep-diff æ£€æµ‹é…ç½®å˜æ›´
- æä¾›è¯¦ç»†çš„å˜æ›´ä¿¡æ¯
- å˜æ›´è¿‡æ»¤å’Œåˆ†ç»„åŠŸèƒ½

### `src/helpers/`
**èŒè´£**: è¾…åŠ©å·¥å…·å‡½æ•°

#### `define-config.ts`
- `defineConfig()` å‡½æ•°
- `defineConfigWithOptions()` å‡½æ•°
- `mergeEnvConfig()` è¾…åŠ©å‡½æ•°
- `validateConfig()` éªŒè¯å‡½æ•°

## ğŸ”„ å¯¼å…¥å…³ç³»

```
index.ts
â”œâ”€â”€ core/config-manager.ts
â”‚   â”œâ”€â”€ types/
â”‚   â”œâ”€â”€ loaders/config-loader.ts
â”‚   â””â”€â”€ detectors/change-detector.ts
â”œâ”€â”€ loaders/config-loader.ts
â”‚   â””â”€â”€ types/
â”œâ”€â”€ detectors/change-detector.ts
â”‚   â””â”€â”€ types/
â””â”€â”€ helpers/define-config.ts
    â””â”€â”€ types/
```

## ğŸ“ è®¾è®¡åŸåˆ™

### 1. **å•ä¸€èŒè´£**
æ¯ä¸ªæ¨¡å—åªè´Ÿè´£ä¸€ä¸ªæ˜ç¡®çš„åŠŸèƒ½é¢†åŸŸ

### 2. **æ¸…æ™°çš„å±‚æ¬¡**
- `types/` - ç±»å‹å®šä¹‰å±‚
- `core/` - æ ¸å¿ƒä¸šåŠ¡å±‚
- `loaders/` - æ•°æ®åŠ è½½å±‚
- `detectors/` - åˆ†ææ£€æµ‹å±‚
- `helpers/` - å·¥å…·è¾…åŠ©å±‚

### 3. **æœ€å°åŒ–å…¥å£**
src/index.ts æ˜¯å”¯ä¸€çš„å…¥å£æ–‡ä»¶ï¼Œæ‰€æœ‰å…¶ä»–æ¨¡å—é€šè¿‡å®ƒæš´éœ²

### 4. **æ¨¡å—ç‹¬ç«‹æ€§**
æ¯ä¸ªå­æ¨¡å—å¯ä»¥ç‹¬ç«‹æµ‹è¯•å’Œç»´æŠ¤

### 5. **ç±»å‹å®‰å…¨**
æ‰€æœ‰ç±»å‹å®šä¹‰é›†ä¸­åœ¨ types/ ç›®å½•ï¼Œä¾¿äºç®¡ç†å’Œå¼•ç”¨

## ğŸ¯ æ‰©å±•æŒ‡å—

### æ·»åŠ æ–°çš„åŠ è½½å™¨
åœ¨ `src/loaders/` ç›®å½•ä¸‹åˆ›å»ºæ–°æ–‡ä»¶ï¼Œä¾‹å¦‚ï¼š
```typescript
// src/loaders/xml-loader.ts
export class XMLLoader {
  // å®ç° XML åŠ è½½é€»è¾‘
}
```

### æ·»åŠ æ–°çš„æ£€æµ‹å™¨
åœ¨ `src/detectors/` ç›®å½•ä¸‹åˆ›å»ºæ–°æ–‡ä»¶ï¼Œä¾‹å¦‚ï¼š
```typescript
// src/detectors/schema-validator.ts
export class SchemaValidator {
  // å®ç° schema éªŒè¯é€»è¾‘
}
```

### æ·»åŠ æ–°çš„è¾…åŠ©å‡½æ•°
åœ¨ `src/helpers/` ç›®å½•ä¸‹æ·»åŠ æˆ–ä¿®æ”¹æ–‡ä»¶

### æ·»åŠ æ–°çš„ç±»å‹
åœ¨ `src/types/index.ts` ä¸­æ·»åŠ ç±»å‹å®šä¹‰

## ğŸš€ æ„å»ºæµç¨‹

1. TypeScript ç¼–è¯‘æ‰€æœ‰ src/ ä¸‹çš„æ–‡ä»¶
2. tsup æ‰“åŒ…æˆ CJS å’Œ ESM æ ¼å¼
3. ç”Ÿæˆç±»å‹å£°æ˜æ–‡ä»¶
4. è¾“å‡ºåˆ° dist/ ç›®å½•

## ğŸ“Œ æœ€ä½³å®è·µ

1. **ä¿æŒ index.ts ç®€æ´**: åªåšå¯¼å‡ºï¼Œä¸åŒ…å«ä¸šåŠ¡é€»è¾‘
2. **æ¨¡å—å†…èš**: ç›¸å…³åŠŸèƒ½æ”¾åœ¨åŒä¸€ç›®å½•ä¸‹
3. **é¿å…å¾ªç¯ä¾èµ–**: ç±»å‹å®šä¹‰ç‹¬ç«‹ï¼Œé¿å…æ¨¡å—é—´å¾ªç¯å¼•ç”¨
4. **ç»Ÿä¸€å¯¼å‡º**: æ¯ä¸ªç›®å½•çš„ index.ts ç»Ÿä¸€å¯¼å‡ºè¯¥ç›®å½•çš„æ‰€æœ‰æ¨¡å—